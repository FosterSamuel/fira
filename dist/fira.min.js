const t={first:1,second:2,third:3,dome:4};function e(t){const e=document.createElementNS("http://www.w3.org/2000/svg","g");return t&&e.classList.add(t),e}function o(){const t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d","M0 0H5V5H0"),t.classList.add("highlightSquare"),t}function r(){const t=document.createElementNS("http://www.w3.org/2000/svg","circle");return t.setAttribute("cx","2.5"),t.setAttribute("cy","2.5"),t.setAttribute("r","0.5"),t.classList.add("highlightDot"),t}function n(t,e){const o=document.createElementNS("http://www.w3.org/2000/svg","path");if(o.setAttribute("d","M2.72 1.7375 2.72 3.0125 2.2738 3.0125 2.2738 1.7375A3.1875.6375 0 012.1781 1.5781L2.1781 1.4188A2.55.6375 0 012.2738 1.2275.6375.4781 0 012.72 1.2275 2.55.6375 0 012.8156 1.4188L2.8156 1.5781A3.1875.6375 0 012.72 1.7375M2.2738 3.0125 2.1781 3.1081 1.6362 3.1081 1.5406 3.2037 1.5406 3.7456 1.6362 3.8412 3.3575 3.8412 3.4531 3.7456 3.4531 3.2037 3.3575 3.1081 2.8156 3.1081 2.72 3.0125"),o.setAttribute("fill","black"),o.setAttribute("draggable","true"),o.classList.add("worker"),e)for(const t of e)o.classList.add(t);return t.appendChild(o),o}function i(t,e){const o={first:"M.5.5H4.5V4.5H.5",second:"M.75.75H4.25V4.25H.75",third:"M1 1H4V4H1"},r="dome"==e,n=document.createElementNS("http://www.w3.org/2000/svg",r?"circle":"path");return r?(n.setAttribute("cx","2.5"),n.setAttribute("cy","2.5"),n.setAttribute("r","1.35"),n.classList.add(e)):(n.setAttribute("d",o[e]),n.setAttribute("fill","black"),n.classList.add(`${e}Building`)),t.appendChild(n),n}function s(t,e,o){t.style.transform=`translateY(${20*e}%) translateX(${20*o}%)`}function d(t,n){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("fira-board"),i.setAttribute("viewBox","0 0 25 25");const d=e("highlightSquareGroup"),u=e("buildingGroup"),c=e("highlightDotGroup"),l=function(){const t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d","M5 0v25M10 0v25M15 0v25M20 0v25M0 5h25M0 10h25M0 15h25M0 20h25"),t.setAttribute("stroke","black"),t.setAttribute("stroke-width","0.05"),t.setAttribute("fill","none"),t.classList.add("boardGutters"),t}(),a=e("workerGroup"),p=[],h=[];for(let t=0;t<5;t++){const e=[],i=[];for(let u=0;u<5;u++){const l=o(),a=r();s(a,t,u),s(l,t,u),l.addEventListener("click",(()=>{n(l,t,u)})),d.appendChild(l),c.appendChild(a),e.push(l),i.push(a)}p.push(e),h.push(i)}return i.appendChild(d),i.appendChild(u),i.appendChild(c),i.appendChild(l),i.appendChild(a),t.appendChild(i),{element:i,squares:p,dots:h,buildingGroup:u,workerGroup:a}}function u(o,r,n,d,u){c(n,d,u.buildings);const l=function(o){const r=e("buildingGroupInner");for(let e=0;e<t[o];e++){const t=i(r,["first","second","third","dome"][e]);r.appendChild(t)}return r}(r);s(l,n,d),o.appendChild(l),u.buildings[n][d]={elementGroup:l,building:r}}function c(t,e,o){const r=o[t][e];r&&(r.elementGroup.remove(),o[t][e]=void 0)}function l(t){const e={workers:[],buildings:[[void 0,void 0,void 0,void 0,void 0],[void 0,void 0,void 0,void 0,void 0],[void 0,void 0,void 0,void 0,void 0],[void 0,void 0,void 0,void 0,void 0],[void 0,void 0,void 0,void 0,void 0]],selected:{square:void 0,prevSquare:void 0,worker:void 0},onTap:t.onTap},o=d(t.element,((t,o,r)=>{e.onTap(t,o,r)}));return{boardElements:o,state:e,addWorkerForPlayer:function(t,i,d){const u=function(t,o){for(const r of e.workers)if(r.row==t&&r.column==o)return r;return!1}(i,d);u&&r(u);const c=2==t?["workerSecond"]:[],l={element:n(o.workerGroup,c),player:t,row:i,column:d};return e.workers.push(l),s(l.element,i,d),l},moveWorker:function(t,e,o){t.row=e,t.column=o,s(t.element,e,o)},setBuilding:(t,r,n)=>{u(o.buildingGroup,n,t,r,e)},setHighlightDots:t=>{!function(t,e){for(const o of e)t[o[0]][o[1]].style.display="inline"}(o.dots,t)},getWorkerOnSquare:(t,o)=>{const r=function(t,e,o){let r;for(const n of t)if(n.row==e&&n.column==o){r=n;break}return r}(e.workers,t,o);r&&(e.selected.worker=r)},removeWorker:r,removeBuilding:(t,o)=>{c(t,o,e.buildings)},removeHighlightDots:()=>{o.dots.forEach((t=>{t.forEach((t=>{t.style.display="none"}))}))},setOnTap:t=>{e.onTap=t}};function r(t){const o=e.workers.indexOf(t);o>-1&&(t.element.remove(),e.workers.splice(o,1))}}export{l as default};
